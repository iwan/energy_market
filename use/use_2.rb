# require 'energy_market' # usa la gemma installata
require_relative '../lib/energy_market' # usa il file :-)

start_date = "2013-01-01"
zone = "Rome"
# array = [11433,11480,11010,10747,10275,10378,10776,10957,11595,12475,12835,13042,12960,12299,11749,11472,12284,14372,15146,15504,14787,14130,13078,11630,11046,10557,9903,9985,10462,11093,13672,15415,17373,18527,18901,19251,18686,18221,18419,18718,19296,21078,20943,20251,19222,18015,16431,14556,12620,11687,11634,11408,11434,12210,14227,16657,18478,19908,19932,20075,18780,18111,18729,19059,20124,21069,20697,20038,18558,16747,15215,13855,12892,12255,11796,11576,11769,12339,13942,16825,18515,19550,19816,19903,19049,18505,19223,19384,20347,21018,20740,19929,18416,16828,15293,13783,13163,12305,12173,11425,11750,11995,14461,16270,19107,20297,20000,20213,18827,18815,19273,19488,20386,20854,20361,19360,17874,16479,14833,13553,12938,12259,11978,11217,10972,10970,11207,11919,12767,13733,13762,14235,13665,13192,12641,12588,12979,15053,15776,16019,15582,14881,13766,12567,13280,12270,11728,11385,11642,11781,12953,13946,14871,15555,15546,15919,15308,14485,13960,14260,15421,17772,18042,17280,15687,14643,13762,12952,11313,10415,10225,9888,9879,10316,11354,12525,12898,13695,14001,14542,14119,13346,12758,12869,13349,15638,16164,15535,14232,13260,12414,11717,11544,10959,10780,10645,10986,12124,15469,19210,22136,23190,23513,23793,21881,22025,23271,23692,24585,24737,23591,22428,21246,19605,17307,15731,15886,15076,14840,14623,14898,15791,18930,23312,25579,26357,26088,26027,23708,23668,24604,24995,25480,26567,25853,24683,23899,21998,19567,17878,15413,14720,14523,14391,14661,15574,18777,22788,25068,25708,25248,25213,23777,23743,23825,24188,24452,25528,25040,23859,22545,20850,18541,16975,16088,15279,14998,14628,14845,15738,19011,22920,25399,26184,26160,26191,24002,23857,24573,24742,25038,26150,25512,24360,23136,21779,19359,17596,16268,15485,15120,15044,15087,16255,19220,23202,25413,26120,26129,26281,24243,23702,24320,24569,24786,25638,25119,24106,22685,21235,19155,17349,14762,13722,13476,13213,12930,13288,14569,16663,17527,18685,19054,18615,17613,16410,15949,15876,17623,19587,20310,20227,19071,17894,16458,15383,13220,12411,11962,11672,11641,11690,12305,12991,13495,14575,15307,16045,16740,15273,14956,14723,15282,17647,18838,18700,18229,17147,15674,14309,14352,13531,13282,13202,13612,14685,18024,22541,24989,25910,26118,26193,24461,24576,24689,26029,26831,28519,27516,25972,24325,22642,20173,18507,16867,16170,15532,15313,15622,16604,19535,23692,26394,27270,27195,27230,25220,25158,25901,26105,26520,27598,26852,25523,24382,22845,20456,18521,17180,16311,15975,15797,16024,17003,20269,24265,27076,27919,27723,27406,25065,25044,25871,26202,26546,27671,27391,26072,24652,23339,20989,19318,17620,16686,16152,16134,16194,16942,19996,24352,27051,27837,27647,27369,25275,25169,25981,26386,26773,27494,27177,25988,24535,23103,20782,18969,17522,16874,16726,16524,16454,17205,20201,24028,26369,27516,27533,27253,24714,24205,25402,25803,25981,26533,26192,24942,23363,21904,19737,17929,16526,15842,15303,15003,14957,14987,16238,17987,19354,20223,20223,19666,18309,17369,17000,17001,17476,19669,20834,20404,18932,17597,16668,15367,14786,13941,13442,13083,13008,13334,13868,14608,14895,16150,17066,17317,16789,15964,15410,15269,15334,17451,18839,18931,18167,17282,16290,15070,14561,13711,13573,13645,14066,15222,19040,22998,25570,26401,26568,26264,24202,24449,25135,25274,25815,26601,26111,25176,23982,22447,20002,18462,16343,15774,15365,15100,15359,16462,19641,23614,25911,26943,26940,26916,24151,24040,25281,25259,25615,26411,26076,24793,23583,21938,19751,17828,16847,15933,15679,15334,15362,16460,19757,23665,26492,27364,27402,27169,25000,24904,25403,25474,25799,26336,26229,24988,23633,22428,19995,18230,16953,16218,16009,15656,15723,16732,20033,23990,26507,27273,27484,27070,24757,24778,25269,25235,25783,26374,26040,25036,23648,22055,19690,17803,17120,16352,16107,15764,15800,16748,19883,23905,26751,27692,27814,27521,25368,25294,25800,25693,25375,25553,25445,24235,23107,21346,19167,17345,16604,15680,15520,15077,14934,15107,16376,18726,19945,20908,21227,20933,19425,18406,18252,17867,18925,20205,21351,21034,19382,18100,16655,15395,14623,13648,13542,13072,13014,13010,13556,14529,15157,16293,17200,17737,17181,16341,15966,15605,15899,17486,19221,19709,18899,18077,16663,15217,14460,13605,13221,13532,13725,15151,19409,23798,26508,26949,27048,26797,24461,25047,25817,26220,26375,27004,27229,25999,24536,23253,20946,19632,16651,15974,15773,15594,15766,16704,19787,23897,26976,28075,27931,27460,25196,25132,25953,26408,26387,26696,26682,25412,24095,22772,20566,19036,17035,16119,15791,15646,15713,16681,19727,23663,26388,27405,27676,27493,25503,25696,26402,26621,26763,26875,26810,25537,24209,22890,20501,18723,17309,16611,16155,15971,16182,17049,20007,23939,26766,27643,27634,27206,24946,25467,26225,26581,26738,26898,26788,25564,24368,22690,20531,18805,17119,16141,16029,15789,16042,16745,19399,22829,25557,26963,26927,26544,24356,24552,25372,25519,25643,25930,26279,24935,23679,22296,19929,18292,17610,16743,15849,15394,15306,15565,16839,18980,20850,21812,22032,21777,20300,19194,18972,19032,19337,20316,21993,21800,20130,18574,17214,16045,14951,14023,13442,13110,13011,13346,13917,14603,15333,16552,17456,17740,17470,16736,16613,16209,16383,17802,19729,19769,19004,18195,16808,15557,14318,13597,13434,13319,13550,14816,18658,22422,25473,26669,26849,26743,24809,24903,25728,25727,25687,26355,26289,24937,23497,21886,19824,18618,17031,16831,16382,15891,16085,16877,19572,23080,25992,27808,27893,28101,26123,26106,26350,26431,26513,26338,26450,25281,23981,22571,20319,18460,17197,16296,15959,15887,15999,16990,19994,23466,26219,27742,28103,28159,25502,25521,26614,26807,26758,26466,26558,25334,24007,22547,20207,18462,17264,16432,16156,15955,16061,16963,19914,23478,26144,27353,27860,27774,25668,25623,26336,26570,26290,26093,26268,25007,23686,22208,19917,18202,17049,16339,15971,15851,15967,16889,19604,23019,25843,27254,27493,27350,25245,25153,25917,25992,25694,25394,25741,24527,22957,21603,19373,17814,17301,16382,16053,15663,15471,15672,16909,18599,20200,21717,22073,21806,20441,19332,18989,18887]

array=Array.new(24){|i| i+1}

v = EnergyMarket::Vector.new(start_date, zone: zone).data(array+array+array)

puts v.sum

puts v.group_by(:hour)
puts v.group_by(:day)
puts v.group_by(:wday)
puts v.group_by(:month)

puts v.group_by(:hour).sum